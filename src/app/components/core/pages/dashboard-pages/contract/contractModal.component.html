<ng-container aria-label="Modal para gerar o contrato">
  <div class="flex h-full flex-col items-center justify-center gap-2 rounded-lg">
    <div>
      <div *ngIf="loader_contractGenerator === true" class="loader_contractGenerator flex flex-col items-center justify-center gap-1">
        <iframe src="https://lottie.host/embed/2350e17a-7b95-469d-8168-29d8107fff86/Z4KO19tZJb.json"></iframe>
        <span class="font-sans text-primary">{{ currentMessage }}</span>
      </div>
    </div>

    <div class="flex flex-col items-start justify-start gap-8 p-5 pt-0" *ngIf="(pendingBlob && loader_contractGenerator === false) || (blobExternalDownload && loader_contractGenerator === false && errorAtContractGeneration === false)">
      <div class="flex flex-col gap-5">
        <div class="flex w-full items-start justify-between gap-3 text-black">
          <div class="flex items-center justify-center gap-2">
            <div class="w-fit rounded-full bg-[#f5f7fa] p-2">
              <img class="w-6" src="/assets/icons/journal.svg" alt="" />
            </div>
            <div class="flex flex-col">
              <span class="font-sans text-sm font-semibold">Contrato Gerado</span>
              <span class="font-sans text-xs text-gray-700">Faça o download do contrato</span>
            </div>
          </div>
          <img (click)="closeModal()" class="w-5 cursor-pointer text-gray-500" src="assets/icons/closeIcon.svg" alt="Icone de fechar o modal" />
        </div>

        <div class="alert">
          <div class="flex items-start justify-center rounded-md bg-slate-100 p-2 text-sm">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#687189" class="mr-3 h-4 w-4 flex-shrink-0">
              <path fill-rule="evenodd" d="M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
            </svg>
            <p class="font-sans text-xs">Por favor, certifique-se de salvar o arquivo antes de sair desta tela. Ao sair, será necessário gerar o contrato novamente.</p>
          </div>
        </div>
      </div>

      <div class="w-full font-sans">
        <span class="hidden text-sm font-semibold text-text">Faça o download do contrato clicando no botão abaixo.</span>
      </div>

      <div class="flex w-full justify-center">
        <button type="button" (click)="downloadDocument()" class="flex items-end justify-center gap-3 rounded-lg bg-primary px-5 py-2 text-center font-sans text-sm text-white">
          <span>
            <img class="h-5 w-5" src="/assets/icons/downloadIcon.svg" alt="Icone de download" />
          </span>
          <span>Baixar Contrato</span>
        </button>
      </div>
    </div>

    <div class="flex flex-col items-start justify-start gap-8 p-5 pt-0" *ngIf="errorAtContractGeneration">
      <div class="flex flex-col gap-5">
        <div class="flex w-full items-start justify-between gap-3 text-black">
          <div class="flex items-center justify-center gap-2">
            <div class="w-fit rounded-full bg-[#f5f7fa] p-2">
              <img class="w-6" src="/assets/icons/journal.svg" alt="" />
            </div>
            <div class="flex flex-col">
              <span class="font-sans text-sm font-semibold">Erro ao gerar contrato</span>
            </div>
          </div>
          <img (click)="closeModal()" class="w-5 cursor-pointer text-gray-500" src="assets/icons/closeIcon.svg" alt="Icone de fechar o modal" />
        </div>

        <div class="alert">
          <div class="flex items-start justify-center rounded-md bg-slate-100 p-2 text-sm">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#687189" class="mr-3 h-4 w-4 flex-shrink-0">
              <path fill-rule="evenodd" d="M19 10.5a8.5 8.5 0 11-17 0 8.5 8.5 0 0117 0zM8.25 9.75A.75.75 0 019 9h.253a1.75 1.75 0 011.709 2.13l-.46 2.066a.25.25 0 00.245.304H11a.75.75 0 010 1.5h-.253a1.75 1.75 0 01-1.709-2.13l.46-2.066a.25.25 0 00-.245-.304H9a.75.75 0 01-.75-.75zM10 7a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
            </svg>
            <p class="font-sans text-xs">Ocorreu um erro ao tentar gerar o contrato. Contate o administrador do sistema e tente novamente mais tarde. Verifique</p>
          </div>
        </div>
      </div>

      <div class="w-full font-sans">
        <span class="hidden text-sm font-semibold text-text">Faça o download do contrato clicando no botão abaixo.</span>
      </div>

      <div class="flex w-full justify-center">
        <button type="button" (click)="closeModal()" class="flex items-end justify-center gap-3 rounded-lg bg-red-500 px-5 py-2 text-center font-sans text-sm text-white">
          <span>Continuar mais tarde</span>
        </button>
      </div>
    </div>
  </div>
</ng-container>
